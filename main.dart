import 'dart:io';
import 'admin.dart';
import 'student.dart';
import 'library.dart';

void main() {
  Library library = Library();
  library.addBook("Book 1");
  library.addBook("Book 2");
  library.addBook("Book 3");
   print(
          "||*****************************************************************************************||");
   print(
          "||*****************************************************************************************||");
  print("\n||======================== Welcome to the Library Management System! ======================||\n");
  print(
          "||*****************************************************************************************||");
  print(
          "||*****************************************************************************************||\n");

  while (true) {
  
    print(
          "||*****************************************************************************************||");
      print(
          "||======================= Please select a user type:       ================================||");
      print(
          "||==========================       select                  ================================||");
      print(
          "||==========================      1. Admin                 ================================||");
      print(
          "||==========================      2. Student               ================================||");
      print(
          "||==========================      3. Exit                  ================================||");
      print(
          "||*****************************************************************************************||\n");

    String userTypeChoice = stdin.readLineSync()!;
    if (userTypeChoice == "3") {
      print(
          "||*****************************************************************************************||");
      print(
        "\n||========================================== Goodbye! =====================================||");
        print(
          "||*****************************************************************************************||");
      break;
    }
    print(
          "||*****************************************************************************************||");
    print(
          "||==================================== Enter your username: =================================||\n ");
    String username = stdin.readLineSync()!;
     print(
          "||*****************************************************************************************||");
    print(
          "||==================================== Enter your password: ===============================|| \n");
    String password = stdin.readLineSync()!;
     print(
          "||*****************************************************************************************||");

    if (userTypeChoice == "1") {
      Admin admin = Admin();
      if (admin.authenticate(username, password)) {
        admin.performAdminOperations(library);
      } else {
        print("Invalid username or password.");
      }
    } else if (userTypeChoice == "2") {
      Student student = Student(username);
      if (student.authenticate(password)) {
        student.performStudentOperations(library);
      } else {
        print("Invalid password.");
      }
    } else {
      print("Invalid choice.");
    }
  }
}
